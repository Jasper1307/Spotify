import spotipy
from spotipy.oauth2 import SpotifyClientCredentials

# Set up your Spotify API credentials
client_id = 'YOUR_CLIENT_ID'
client_secret = 'YOUR_CLIENT_SECRET'

# Initialize the Spotify API client
sp = spotipy.Spotify(client_credentials_manager=SpotifyClientCredentials(client_id, client_secret))

# Define a function to get album cover URL for a song
def get_album_cover_url(track_name, artist_name):
  results = sp.search(q=f"{track_name} artist:{artist_name}", type='track', limit=1)
  if results['tracks']['items']:
    album_cover_url = results['tracks']['items'][0]['album']['images'][0]['url']
    return album_cover_url
  else:
    return None

def search(request):
  track_name = request.args.get('track_name')
  artist_name = request.args.get('artist_name')

  album_cover_url = get_album_cover_url(track_name, artist_name)

  if album_cover_url:
    return f'<img src="{album_cover_url}" />'
  else:
    return 'No results found.'
